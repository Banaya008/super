<% schema = controls.display_schema(action: action_inquirer) %>

<% content_for(:header) do %>
  <header>
    <h1 class="text-3xl inline-block">
      <%= controls.title %>
    </h1>
    <% controls.resources_actions(params: params, action: action_inquirer).each do |link| %>
      <%= link_to(link.text, link.href, link.options.merge(class: "inline-block ml-2")) %>
    <% end %>
  </header>
<% end %>

<table class="w-full leading-loose mt-4">
  <thead class="border-gray-400 border-solid">
    <tr>
      <% (schema.field_keys + ["Actions"]).each do |column| %>
        <th class="text-left"><%= column.to_s.humanize %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @resources.each.with_index do |resource, index| %>
      <tr id="resource-pk-<%= resource.id %>" class="<%= index.even? ? "bg-gray-100" : "" %>" >
        <% schema.field_keys.each do |column| %>
          <td><%= Super::Display.format(schema, resource, column) %></td>
        <% end %>
        <td>
          <% controls.resource_actions(resource, params: params, action: action_inquirer).each do |link| %>
            <%= link_to(link.text, link.href, link.options) %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<% @pagination.each do |page_query_params, is_current_page, display| %>
  <%= link_to(
    display,
    polymorphic_path(
      Super.configuration.path_parts(controls.model),
      page_query_params
    ),
    class: "#{is_current_page ? " text-gray-900" : ""}"
  ) %>
<% end %>
